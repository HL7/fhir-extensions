<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../input-cache/schemas/R5/fhir-single.xsd">
  <!-- The spaces between the open and close "a" tag are mandatory.  (Cuz HTML renderers are dumb...) -->
  <a name="intro"> </a>
	<p>
    The FHIR specification defines two ways to document obligations for 
    applications providing or consuming FHIR resources:
  </p>
  <ul>
    <li><code>MustSupport</code>: See <a href="{{ site.data.fhir.path }}obligations.html">Application Obligations for more details and general context</a></li>
    <li>The <a href="StructureDefinition-obligation.html">Obligation extension</a>, documented here</li>
  </ul>
  
  <a name="details"> </a>
<h3>Application Obligations</h3>

<p>
Each obligation has the following features:
</p>
<table lass="grid">
  <tr>
    <td>code</td>
    <td>
      one or more codes that specify the details of the obligation. The codes are taken from the 
      <a href="codesystem-obligation.html">Obligations Code system</a>. The codes say things like 
      'SHALL store this data item', 'SHOULD populate this if a data element is available', or 
      'HL7 v2 expectations apply'. If multiple codes are specified, then all the obligations 
      apply. See below for more details about how the combination obligation 
      codes work.
    </td>
  </tr>
  <tr>
    <td>actor</td>
    <td>
      One or more references to <a href="actordefinition.html">actors</a> that are involved in the 
      exchanges associated with the element. If any actors are indicated, then the obligations 
      are only associated with those actors; if no actors are indicated, the obligations apply 
      to all applications exchanging the element. Since this includes in any derived profiles,
      designers should be wary of defining obligations that don't have any associated actors.
    </td>
  </tr>
  <tr>
    <td>documentation</td>
    <td>
      Markdown documentation that provides additional information about the obligation, including
      it's rationale and justification
    </td>
  </tr>
  <tr>
    <td>usage</td>
    <td>
      A set of qualifiers that restrict the scope of the obligation. Typically, the obligation is 
      restricted by jurisdiction/realm, but it may also be restricted to particular clinical or
      workflow contexts. This specification does not detail exactly how implementations determine 
      when usage criteria apply, so this is a subject that should be addressed in implementation 
      guides when usages are specified
    </td>
  </tr>
  <tr>
    <td>filter</td>
    <td>
      A <a href="fhirpath.html">FHIRPath</a> expression that indicates a subset of elements to 
      which this obligation applies. This is typically used with elements with a max cardinality
      greater than 0. The same outcome can be achieved by slicing the element, but this has a
      real price for implementers, so a filter is preferred if the element is not sliced for 
      other reasons
    </td>
  </tr>
  <tr>
    <td>filterDocumentation</td>
    <td>
      A human readable description of the filter. This SHOULD be provided if a filter is specified,
      for the benefit of readers not familiar with FHIRPath expressions.
    </td>
  </tr>
  <tr>
    <td>process</td>
    <td>
      One or more URIs that reference processes that involve handling the data element. The references
      may be to <a href="operationdefinition.html">Operations</a> defined by the FHIR specification, or 
      processed defined elsewhere, including in the <a href="https://www.iso.org/standard/57757.html">EHR-FM specification</a>.
    </td>
  </tr>
</table>

<a name="obligation-codes"> </a>
<h3>Obligation Codes</h3>

<p>
There are two kinds of codes specified by the obligation codes coding system:
</p>
<ul>
  <li>Duplicate codes combining "shall" or "should" with a functional code</li>
  <li>Composite codes that specify one or more combinations of duplicate codes</li>
</ul>
<p>
The functional codes are defined in three different groups, according to whether 
obligations apply to resource creators, consumers or applications that are just 
transferring them from one application to another (a category that includes general
purpose FHIR repositories). Note that actors, whether clients or servers or something
else, typically both create and consume resources.
</p>

</div>